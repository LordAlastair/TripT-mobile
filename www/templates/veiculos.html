<ion-view title="Veículos">
  <ion-nav-buttons side="secondary">
    <button
      class="button button-icon icon ion-ios-minus-outline"
      ng-disabled="!veiculos.length"
      ng-click="toggleDelete()">
    </button>
  </ion-nav-buttons>

  <ion-content overflow-scroll="true">
    <form class="list card">
      <label class="item item-input">
        <i class="icon ion-search placeholder-icon"></i>
        <input ng-model="filtro" type="search">
      </label>
    </form>

    <ion-list
      type="card"
      show-delete="showDelete"
      can-swipe="true">

      <ion-item class="text-center" ng-if="loading">
        <ion-spinner icon="ripple"></ion-spinner>
      </ion-item>

      <ion-item ng-if="!veiculos.length && !loading">
        Nenhum veículo cadastrado.
      </ion-item>

      <ion-item
        ng-repeat="veiculo in filteredVeiculos = (veiculos | filter: filtro)"
        ui-sref="menu-fornecedores.veiculo({ vei_cd_veiculo: veiculo.vei_cd_veiculo })">

        {{veiculo.vei_ds_modelo}} - {{veiculo.vei_ds_placa}}

        <ion-option-button
          class="button-assertive"
          ng-click="edit(item)">
          Edit
        </ion-option-button>

        <ion-delete-button
          class="ion-minus-circled"
          ng-click="veiculos.splice($index, 1)">
        </ion-delete-button>
      </ion-item>

      <ion-item ng-if="!filteredVeiculos.length && filtro">
        Nenhum veículo com o filtro '{{ filtro }}'.
      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
